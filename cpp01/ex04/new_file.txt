#include "losers.hpp"

#define RESET   "\033[0m"
#define RED     "\033[31m"
#define GREEN   "\033[32m"
#define YELLOW  "\033[33m"
#define BLUE    "\033[34m"
#define MAGENTA "\033[35m"
#define CYAN    "\033[36m"

void printHeader(const std::string& title) {
    std::cout << "\n" << CYAN << "========================================" << RESET << std::endl;
    std::cout << CYAN << "  " << title << RESET << std::endl;
    std::cout << CYAN << "========================================" << RESET << std::endl;
}

void testEx04() {
    printHeader("EX04: Sed is for losers");
    
    std::cout << YELLOW << "\n[Instructions]" << RESET << std::endl;
    std::cout << "This exercise requires file I/O." << std::endl;
    std::cout << "Create a test file and run: ./replace <filename> <s1> <s2>" << std::endl;
    std::cout << "\nExample test cases:" << std::endl;
    std::cout << "1. echo 'Hello World Hello' > test.txt" << std::endl;
    std::cout << "   ./replace test.txt Hello Hi" << std::endl;
    std::cout << "   Expected output in test.txt.replace: 'Hi World Hi'" << std::endl;
    std::cout << "\n2. Test with empty string replacement" << std::endl;
    std::cout << "3. Test with string that doesn't exist" << std::endl;
    std::cout << "4. Test with overlapping occurrences" << std::endl;
    std::cout << "5. Test with special characters" << std::endl;
    
    std::cout << YELLOW << "\n[Edge Cases to Test]" << RESET << std::endl;
    std::cout << "- Empty file" << std::endl;
    std::cout << "- File that doesn't exist" << std::endl;
    std::cout << "- s1 is empty string" << std::endl;
    std::cout << "- s1 equals s2" << std::endl;
    std::cout << "- Multiple consecutive occurrences" << std::endl;
}
int main(int ac, char *av[])
{
    losers l;
    l.parse_input(av, ac);
    std::ifstream inputFile(av[1]);
    std::ofstream outputFile("new_file.txt");
    if(!inputFile || !outputFile)
    {
        std:: cerr << "error opening file"<< std::endl;
        return 1;
    }
    std::string line;
    while (std::getline(inputFile, line))
    {
        outputFile << l.get_line(line) << std::endl;
    }
    inputFile.close();
    outputFile.close();
    return (0);
}
